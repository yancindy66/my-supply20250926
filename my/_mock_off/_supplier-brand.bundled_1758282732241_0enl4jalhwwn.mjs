// mock/supplier-brand.js
import fs from "fs";
import path from "path";
var dataDir = path.resolve(process.cwd(), "mock", "data");
var file = path.resolve(dataDir, "supplier-brand.json");
var stdFile = path.resolve(dataDir, "platform-standard.json");
function ensure() {
  try {
    if (!fs.existsSync(dataDir)) fs.mkdirSync(dataDir, { recursive: true });
  } catch {
  }
}
function load() {
  try {
    if (fs.existsSync(file)) return JSON.parse(fs.readFileSync(file, "utf8"));
  } catch {
  }
  return [];
}
function save(data) {
  try {
    ensure();
    fs.writeFileSync(file, JSON.stringify(data, null, 2), "utf8");
  } catch {
  }
}
function loadStandards() {
  try {
    if (fs.existsSync(stdFile)) return JSON.parse(fs.readFileSync(stdFile, "utf8"));
  } catch {
  }
  return [];
}
var brands = load();
var standards = loadStandards();
function nextId() {
  return Math.max(0, ...brands.map((b) => b.id || 0)) + 1;
}
function dateStr() {
  const d = /* @__PURE__ */ new Date();
  const y = d.getFullYear();
  const m = String(d.getMonth() + 1).padStart(2, "0");
  const day = String(d.getDate()).padStart(2, "0");
  return `${y}${m}${day}`;
}
function codeOf(ct) {
  if (ct === "\u68C9\u82B1") return "CF";
  if (ct === "\u7EA2\u67A3") return "CJ";
  return "OT";
}
function genPlatformBrandCode(std) {
  const date = dateStr();
  const prefix = codeOf(std.commodity_type);
  return `${prefix}${date}`;
}
function genProductIdByStd(std) {
  const d = /* @__PURE__ */ new Date();
  const yy = String(d.getFullYear()).slice(-2);
  const mm = String(d.getMonth() + 1).padStart(2, "0");
  const prefix = codeOf(std.commodity_type);
  return `${prefix}${yy}${mm}`;
}
function mockParseReport(name, base64, std) {
  const pass = !String(name || "").toLowerCase().includes("fail");
  const ct = std?.commodity_type || "\u68C9\u82B1";
  if (ct === "\u7EA2\u67A3") {
    const measured2 = { "\u7CD6\u5EA6_Brix_%": 72, "\u542B\u6C34\u7387_%": 22, "\u6BCF\u516C\u65A4\u9897\u7C92\u6570": 260, "\u9709\u53D8\u7387_%": 0.5, "\u7834\u635F\u7387_%": 2.5 };
    const profile2 = {
      processor_name: "\u793A\u4F8B\u52A0\u5DE5\u5382",
      processor_address: "\u65B0\u7586\u5E93\u5C14\u52D2\u7ECF\u6D4E\u533A88\u53F7",
      contact_person: "\u674E\u56DB",
      date_brix: 72,
      date_moisture_percent: 22,
      date_pieces_per_kg: 260,
      date_mildew_percent: 0.5,
      date_breakage_percent: 2.5
    };
    return { pass, measured: measured2, profile: profile2 };
  }
  const measured = { "\u7EA4\u7EF4\u957F\u5EA6_mm": 29, "\u9A6C\u514B\u9686\u7B49\u7EA7": "B", "\u5F3A\u5EA6_cN/tex": 28.8, "\u957F\u5EA6\u6574\u9F50\u5EA6_min": 83 };
  const profile = {
    processor_name: "\u793A\u4F8B\u52A0\u5DE5\u5382",
    processor_address: "\u65B0\u7586\u4E4C\u9C81\u6728\u9F50\u9AD8\u65B0\u533A88\u53F7",
    contact_person: "\u5F20\u4E09",
    fiber_length: measured["\u7EA4\u7EF4\u957F\u5EA6_mm"],
    break_strength: measured["\u5F3A\u5EA6_cN/tex"],
    micronaire: 4.1,
    uniformity_index: measured["\u957F\u5EA6\u6574\u9F50\u5EA6_min"],
    no_foreign_fiber: true,
    color_grade_pct: { "11": 60, "21": 30, "31": 10 },
    ginning_quality_pct: { P1: 40, P2: 50, P3: 10 }
  };
  return { pass, measured, profile };
}
function validateAgainstSpec(std, measured) {
  const spec = std.specifications || {};
  for (const k of Object.keys(measured || {})) {
    const v = measured[k];
    const s = spec[k];
    if (s == null) continue;
    if (Array.isArray(s) && typeof s[0] === "number" && typeof s[1] === "number") {
      if (!(v >= s[0] && v <= s[1])) return false;
    } else if (Array.isArray(s)) {
      if (!s.includes(v)) return false;
    } else if (typeof s === "number") {
      if (!(v >= s)) return false;
    }
  }
  return true;
}
var supplier_brand_default = [
  // 列表/查询（支持按 code 精确查询）
  {
    url: "/api/supplier_brand",
    method: "get",
    response: ({ query }) => {
      const code = String(query?.code || "").trim();
      const page = parseInt(query?.page || "1", 10) || 1;
      const pageSize = parseInt(query?.pageSize || "20", 10) || 20;
      let list = brands;
      if (code) list = brands.filter((b) => b.platform_brand_code === code);
      const total = list.length;
      const pageList = list.slice((page - 1) * pageSize, (page - 1) * pageSize + pageSize);
      return { code: 0, data: { list: pageList, total, page, pageSize } };
    }
  },
  // 详情
  {
    url: "/api/supplier_brand/:id",
    method: "get",
    response: ({ params }) => {
      const b = brands.find((x) => String(x.id) === String(params?.id));
      if (!b) return { code: 1, msg: "\u672A\u627E\u5230" };
      return { code: 0, data: b };
    }
  },
  // 解析质检报告并与平台标准进行比对（预审）
  {
    url: "/api/supplier_brand/parse_report",
    method: "post",
    response: ({ body }) => {
      const platform_standard_id = Number(body?.platform_standard_id || 0);
      const std = standards.find((s) => Number(s.id) === platform_standard_id);
      if (!std) return { code: 1, msg: "\u5E73\u53F0\u6807\u51C6\u4E0D\u5B58\u5728" };
      const parsed = mockParseReport(body?.quality_report_name, body?.quality_report_base64, std);
      if (!parsed.pass) return { code: 1, msg: "\u8D28\u68C0\u62A5\u544A\u8BC6\u522B\u5931\u8D25\u6216\u4E0D\u5408\u683C" };
      const spec = std.specifications || {};
      const measured = parsed.measured || {};
      const rows = Object.keys(measured).map((k) => {
        const m = measured[k];
        const s = spec[k];
        let ok = true;
        let expected = "";
        if (Array.isArray(s) && typeof s[0] === "number" && typeof s[1] === "number") {
          ok = m >= s[0] && m <= s[1];
          expected = `${s[0]} ~ ${s[1]}`;
        } else if (Array.isArray(s)) {
          ok = s.includes(m);
          expected = s.join("/");
        } else if (typeof s === "number") {
          ok = m >= s;
          expected = `\u2265 ${s}`;
        } else {
          expected = s == null ? "-" : String(s);
        }
        return { metric: k, expected, measured: m, ok };
      });
      const pass = rows.every((r) => r.ok);
      return { code: 0, data: { rows, pass, profile: parsed.profile } };
    }
  },
  {
    url: "/api/supplier_brand",
    method: "post",
    response: ({ body }) => {
      const brand_name = String(body?.brand_name || "").trim();
      const platform_standard_id = Number(body?.platform_standard_id || 0);
      const supplier_id = Number(body?.supplier_id || 0) || 1;
      const custom_premium = Number(body?.custom_premium || 0) || 0;
      if (!brand_name || !platform_standard_id) return { code: 1, msg: "\u53C2\u6570\u4E0D\u5B8C\u6574" };
      if (brands.some((b) => b.supplier_id === supplier_id && b.brand_name === brand_name)) return { code: 1, msg: "\u8BE5\u5BA2\u6237\u54C1\u724C\u540D\u5DF2\u5B58\u5728" };
      const std = standards.find((s) => Number(s.id) === platform_standard_id);
      if (!std) return { code: 1, msg: "\u5E73\u53F0\u6807\u51C6\u4E0D\u5B58\u5728" };
      const parsed = mockParseReport(body?.quality_report_name, body?.quality_report_base64, std);
      if (!parsed.pass) return { code: 1, msg: "\u8D28\u68C0\u62A5\u544A\u8BC6\u522B\u5931\u8D25\u6216\u4E0D\u5408\u683C" };
      const ok = validateAgainstSpec(std, parsed.measured);
      if (!ok) return { code: 1, msg: "\u8D28\u68C0\u62A5\u544A\u6570\u636E\u4E0E\u6240\u9009\u7B49\u7EA7\u4E0D\u7B26" };
      const platform_brand_code = genPlatformBrandCode(std);
      const item = { id: nextId(), supplier_id, brand_name, platform_standard_id, custom_premium, platform_brand_code, status: "\u5DF2\u4E0A\u67B6", quality_report_url: "", _date: dateStr() };
      brands.push(item);
      save(brands);
      try {
        const pfile = path.resolve(dataDir, "products.json");
        const plist = fs.existsSync(pfile) ? JSON.parse(fs.readFileSync(pfile, "utf8")) : [];
        const nowId = Math.max(0, ...plist.map((p) => p.id || 0)) + 1;
        const product_id = genProductIdByStd(std);
        const baseProduct = {
          id: nowId,
          product_id,
          species: std.commodity_type || "\u68C9\u82B1",
          product_name: brand_name,
          short_code: "",
          production_year: (/* @__PURE__ */ new Date()).getFullYear(),
          package_spec: "200kg/\u5305",
          origin_area: "\u65B0\u7586",
          status: "\u4E0A\u67B6",
          platform_standard_id,
          platform_standard_grade_name: std.grade_name,
          platform_brand_code,
          platform_base_premium: std.base_premium
        };
        plist.push(baseProduct);
        fs.writeFileSync(pfile, JSON.stringify(plist, null, 2), "utf8");
        return { code: 0, data: { brand_name, platform_brand_code, status: item.status, product_db_id: nowId, product_id } };
      } catch {
        return { code: 0, data: { brand_name, platform_brand_code, status: item.status } };
      }
    }
  },
  // 更新
  {
    url: "/api/supplier_brand/:id",
    method: "put",
    response: ({ params, body }) => {
      const idx = brands.findIndex((b) => String(b.id) === String(params?.id));
      if (idx === -1) return { code: 1, msg: "\u672A\u627E\u5230" };
      const updates = {};
      if (body?.brand_name != null) updates.brand_name = String(body.brand_name).trim();
      if (body?.custom_premium != null) updates.custom_premium = Number(body.custom_premium) || 0;
      brands[idx] = { ...brands[idx], ...updates };
      save(brands);
      return { code: 0, data: brands[idx] };
    }
  },
  // 删除
  {
    url: "/api/supplier_brand/:id",
    method: "delete",
    response: ({ params }) => {
      const before = brands.length;
      brands = brands.filter((b) => String(b.id) !== String(params?.id));
      save(brands);
      return { code: 0, data: { removed: before - brands.length } };
    }
  }
];
export {
  supplier_brand_default as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibW9jay9zdXBwbGllci1icmFuZC5qcyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiY29uc3QgX19pbmplY3RlZF9maWxlbmFtZV9fID0gXCJFOlxcXFxteS1zdXBwbHlcXFxcbXlcXFxcbW9ja1xcXFxzdXBwbGllci1icmFuZC5qc1wiO2NvbnN0IF9faW5qZWN0ZWRfZGlybmFtZV9fID0gXCJFOlxcXFxteS1zdXBwbHlcXFxcbXlcXFxcbW9ja1wiO2NvbnN0IF9faW5qZWN0ZWRfaW1wb3J0X21ldGFfdXJsX18gPSBcImZpbGU6Ly8vRTovbXktc3VwcGx5L215L21vY2svc3VwcGxpZXItYnJhbmQuanNcIjtpbXBvcnQgZnMgZnJvbSAnZnMnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5cbmNvbnN0IGRhdGFEaXIgPSBwYXRoLnJlc29sdmUocHJvY2Vzcy5jd2QoKSwgJ21vY2snLCAnZGF0YScpO1xuY29uc3QgZmlsZSA9IHBhdGgucmVzb2x2ZShkYXRhRGlyLCAnc3VwcGxpZXItYnJhbmQuanNvbicpO1xuY29uc3Qgc3RkRmlsZSA9IHBhdGgucmVzb2x2ZShkYXRhRGlyLCAncGxhdGZvcm0tc3RhbmRhcmQuanNvbicpO1xuZnVuY3Rpb24gZW5zdXJlKCl7IHRyeXsgaWYoIWZzLmV4aXN0c1N5bmMoZGF0YURpcikpIGZzLm1rZGlyU3luYyhkYXRhRGlyLHtyZWN1cnNpdmU6dHJ1ZX0pOyB9Y2F0Y2h7fSB9XG5mdW5jdGlvbiBsb2FkKCl7IHRyeXsgaWYoZnMuZXhpc3RzU3luYyhmaWxlKSkgcmV0dXJuIEpTT04ucGFyc2UoZnMucmVhZEZpbGVTeW5jKGZpbGUsJ3V0ZjgnKSk7IH1jYXRjaHt9IHJldHVybiBbXTsgfVxuZnVuY3Rpb24gc2F2ZShkYXRhKXsgdHJ5eyBlbnN1cmUoKTsgZnMud3JpdGVGaWxlU3luYyhmaWxlLCBKU09OLnN0cmluZ2lmeShkYXRhLG51bGwsMiksJ3V0ZjgnKTsgfWNhdGNoe30gfVxuZnVuY3Rpb24gbG9hZFN0YW5kYXJkcygpeyB0cnl7IGlmKGZzLmV4aXN0c1N5bmMoc3RkRmlsZSkpIHJldHVybiBKU09OLnBhcnNlKGZzLnJlYWRGaWxlU3luYyhzdGRGaWxlLCd1dGY4JykpOyB9Y2F0Y2h7fSByZXR1cm4gW107IH1cblxubGV0IGJyYW5kcyA9IGxvYWQoKTtcbmxldCBzdGFuZGFyZHMgPSBsb2FkU3RhbmRhcmRzKCk7XG5cbmZ1bmN0aW9uIG5leHRJZCgpeyByZXR1cm4gTWF0aC5tYXgoMCwgLi4uYnJhbmRzLm1hcChiPT5iLmlkfHwwKSkgKyAxOyB9XG5mdW5jdGlvbiBkYXRlU3RyKCl7IGNvbnN0IGQ9bmV3IERhdGUoKTsgY29uc3QgeT1kLmdldEZ1bGxZZWFyKCk7IGNvbnN0IG09U3RyaW5nKGQuZ2V0TW9udGgoKSsxKS5wYWRTdGFydCgyLCcwJyk7IGNvbnN0IGRheT1TdHJpbmcoZC5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsJzAnKTsgcmV0dXJuIGAke3l9JHttfSR7ZGF5fWA7IH1cbmZ1bmN0aW9uIGNvZGVPZihjdCl7IGlmKGN0PT09J1x1NjhDOVx1ODJCMScpIHJldHVybiAnQ0YnOyBpZihjdD09PSdcdTdFQTJcdTY3QTMnKSByZXR1cm4gJ0NKJzsgcmV0dXJuICdPVCc7IH1cbmZ1bmN0aW9uIGdyYWRlQ29kZShncmFkZU5hbWUpeyByZXR1cm4gZ3JhZGVOYW1lPy5tYXRjaCgvKFxcZCspLyk/LlsxXSA/IGBMJHtncmFkZU5hbWUubWF0Y2goLyhcXGQrKS8pWzFdWzBdfWAgOiAnTDEnOyB9XG5mdW5jdGlvbiBnZW5QbGF0Zm9ybUJyYW5kQ29kZShzdGQpe1xuICBjb25zdCBkYXRlID0gZGF0ZVN0cigpO1xuICBjb25zdCBwcmVmaXggPSBjb2RlT2Yoc3RkLmNvbW1vZGl0eV90eXBlKTtcbiAgLy8gXHU1RTczXHU1M0YwXHU1OTA3XHU2ODQ4XHVGRjFBQ0YrXHU1RTc0XHU2NzA4XHU2NUU1IC8gQ0orXHU1RTc0XHU2NzA4XHU2NUU1XG4gIHJldHVybiBgJHtwcmVmaXh9JHtkYXRlfWA7XG59XG5mdW5jdGlvbiBnZW5Qcm9kdWN0SWRCeVN0ZChzdGQpe1xuICBjb25zdCBkPW5ldyBEYXRlKCk7XG4gIGNvbnN0IHl5PVN0cmluZyhkLmdldEZ1bGxZZWFyKCkpLnNsaWNlKC0yKTtcbiAgY29uc3QgbW09U3RyaW5nKGQuZ2V0TW9udGgoKSsxKS5wYWRTdGFydCgyLCcwJyk7XG4gIGNvbnN0IHByZWZpeCA9IGNvZGVPZihzdGQuY29tbW9kaXR5X3R5cGUpO1xuICAvLyBcdTU1NDZcdTU0QzFJRFx1RkYxQVx1NTU0Nlx1NTRDMVx1NEVFM1x1NzgwMSArIFx1NUU3NFx1NTQwRVx1NEU4Q1x1NEY0RCArIFx1NjcwOFx1NEUyNFx1NEY0RFxuICByZXR1cm4gYCR7cHJlZml4fSR7eXl9JHttbX1gO1xufVxuXG5mdW5jdGlvbiBtb2NrUGFyc2VSZXBvcnQobmFtZSwgYmFzZTY0LCBzdGQpe1xuICAvLyBcdTdCODBcdTUzMTZcdUZGMUFcdTY1ODdcdTRFRjZcdTU0MERcdTUzMDVcdTU0MkIgZmFpbCBcdTUyMTlcdTUyMjRcdTVCOUFcdTRFMERcdTkwMUFcdThGQzdcdUZGMUJcdTU0MjZcdTUyMTlcdTkwMUFcdThGQzdcbiAgY29uc3QgcGFzcyA9ICFTdHJpbmcobmFtZXx8JycpLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2ZhaWwnKTtcbiAgY29uc3QgY3QgPSBzdGQ/LmNvbW1vZGl0eV90eXBlIHx8ICdcdTY4QzlcdTgyQjEnO1xuICBpZiAoY3QgPT09ICdcdTdFQTJcdTY3QTMnKSB7XG4gICAgY29uc3QgbWVhc3VyZWQgPSB7ICdcdTdDRDZcdTVFQTZfQnJpeF8lJzo3MiwgJ1x1NTQyQlx1NkMzNFx1NzM4N18lJzoyMiwgJ1x1NkJDRlx1NTE2Q1x1NjVBNFx1OTg5N1x1N0M5Mlx1NjU3MCc6MjYwLCAnXHU5NzA5XHU1M0Q4XHU3Mzg3XyUnOjAuNSwgJ1x1NzgzNFx1NjM1Rlx1NzM4N18lJzoyLjUgfTtcbiAgICBjb25zdCBwcm9maWxlID0ge1xuICAgICAgcHJvY2Vzc29yX25hbWU6ICdcdTc5M0FcdTRGOEJcdTUyQTBcdTVERTVcdTUzODInLFxuICAgICAgcHJvY2Vzc29yX2FkZHJlc3M6ICdcdTY1QjBcdTc1ODZcdTVFOTNcdTVDMTRcdTUyRDJcdTdFQ0ZcdTZENEVcdTUzM0E4OFx1NTNGNycsXG4gICAgICBjb250YWN0X3BlcnNvbjogJ1x1Njc0RVx1NTZEQicsXG4gICAgICBkYXRlX2JyaXg6IDcyLCBkYXRlX21vaXN0dXJlX3BlcmNlbnQ6IDIyLCBkYXRlX3BpZWNlc19wZXJfa2c6IDI2MCwgZGF0ZV9taWxkZXdfcGVyY2VudDogMC41LCBkYXRlX2JyZWFrYWdlX3BlcmNlbnQ6IDIuNVxuICAgIH07XG4gICAgcmV0dXJuIHsgcGFzcywgbWVhc3VyZWQsIHByb2ZpbGUgfTtcbiAgfVxuICAvLyBcdTY4QzlcdTgyQjFcdTlFRDhcdThCQTRcbiAgY29uc3QgbWVhc3VyZWQgPSB7ICdcdTdFQTRcdTdFRjRcdTk1N0ZcdTVFQTZfbW0nOjI5LCAnXHU5QTZDXHU1MTRCXHU5Njg2XHU3QjQ5XHU3RUE3JzonQicsICdcdTVGM0FcdTVFQTZfY04vdGV4JzoyOC44LCAnXHU5NTdGXHU1RUE2XHU2NTc0XHU5RjUwXHU1RUE2X21pbic6ODMgfTtcbiAgY29uc3QgcHJvZmlsZSA9IHtcbiAgICBwcm9jZXNzb3JfbmFtZTogJ1x1NzkzQVx1NEY4Qlx1NTJBMFx1NURFNVx1NTM4MicsXG4gICAgcHJvY2Vzc29yX2FkZHJlc3M6ICdcdTY1QjBcdTc1ODZcdTRFNENcdTlDODFcdTY3MjhcdTlGNTBcdTlBRDhcdTY1QjBcdTUzM0E4OFx1NTNGNycsXG4gICAgY29udGFjdF9wZXJzb246ICdcdTVGMjBcdTRFMDknLFxuICAgIGZpYmVyX2xlbmd0aDogbWVhc3VyZWRbJ1x1N0VBNFx1N0VGNFx1OTU3Rlx1NUVBNl9tbSddLFxuICAgIGJyZWFrX3N0cmVuZ3RoOiBtZWFzdXJlZFsnXHU1RjNBXHU1RUE2X2NOL3RleCddLFxuICAgIG1pY3JvbmFpcmU6IDQuMSxcbiAgICB1bmlmb3JtaXR5X2luZGV4OiBtZWFzdXJlZFsnXHU5NTdGXHU1RUE2XHU2NTc0XHU5RjUwXHU1RUE2X21pbiddLFxuICAgIG5vX2ZvcmVpZ25fZmliZXI6IHRydWUsXG4gICAgY29sb3JfZ3JhZGVfcGN0OiB7ICcxMSc6IDYwLCAnMjEnOiAzMCwgJzMxJzogMTAgfSxcbiAgICBnaW5uaW5nX3F1YWxpdHlfcGN0OiB7IFAxOiA0MCwgUDI6IDUwLCBQMzogMTAgfVxuICB9O1xuICByZXR1cm4geyBwYXNzLCBtZWFzdXJlZCwgcHJvZmlsZSB9O1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZUFnYWluc3RTcGVjKHN0ZCwgbWVhc3VyZWQpe1xuICAvLyBcdTUzRUFcdTVCRjlcdTVCNThcdTU3MjhcdTc2ODRcdTk1MkVcdThGREJcdTg4NENcdTVCQkRcdTY3N0VcdTY4MjFcdTlBOENcbiAgY29uc3Qgc3BlYyA9IHN0ZC5zcGVjaWZpY2F0aW9uc3x8e307XG4gIGZvciAoY29uc3QgayBvZiBPYmplY3Qua2V5cyhtZWFzdXJlZHx8e30pKXtcbiAgICBjb25zdCB2ID0gbWVhc3VyZWRba107IGNvbnN0IHMgPSBzcGVjW2tdO1xuICAgIGlmIChzPT1udWxsKSBjb250aW51ZTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShzKSAmJiB0eXBlb2Ygc1swXT09PSdudW1iZXInICYmIHR5cGVvZiBzWzFdPT09J251bWJlcicpe1xuICAgICAgaWYgKCEodj49c1swXSAmJiB2PD1zWzFdKSkgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShzKSl7XG4gICAgICBpZiAoIXMuaW5jbHVkZXModikpIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBzPT09J251bWJlcicpe1xuICAgICAgaWYgKCEodj49cykpIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbmV4cG9ydCBkZWZhdWx0IFtcbiAgLy8gXHU1MjE3XHU4ODY4L1x1NjdFNVx1OEJFMlx1RkYwOFx1NjUyRlx1NjMwMVx1NjMwOSBjb2RlIFx1N0NCRVx1Nzg2RVx1NjdFNVx1OEJFMlx1RkYwOVxuICB7IHVybDonL2FwaS9zdXBwbGllcl9icmFuZCcsIG1ldGhvZDonZ2V0JywgcmVzcG9uc2U6KHsgcXVlcnkgfSk9PntcbiAgICAgIGNvbnN0IGNvZGUgPSBTdHJpbmcocXVlcnk/LmNvZGV8fCcnKS50cmltKCk7XG4gICAgICBjb25zdCBwYWdlID0gcGFyc2VJbnQocXVlcnk/LnBhZ2V8fCcxJywxMCl8fDE7XG4gICAgICBjb25zdCBwYWdlU2l6ZSA9IHBhcnNlSW50KHF1ZXJ5Py5wYWdlU2l6ZXx8JzIwJywxMCl8fDIwO1xuICAgICAgbGV0IGxpc3QgPSBicmFuZHM7XG4gICAgICBpZiAoY29kZSkgbGlzdCA9IGJyYW5kcy5maWx0ZXIoYj0+IGIucGxhdGZvcm1fYnJhbmRfY29kZT09PWNvZGUpO1xuICAgICAgY29uc3QgdG90YWwgPSBsaXN0Lmxlbmd0aDtcbiAgICAgIGNvbnN0IHBhZ2VMaXN0ID0gbGlzdC5zbGljZSgocGFnZS0xKSpwYWdlU2l6ZSwgKHBhZ2UtMSkqcGFnZVNpemUrcGFnZVNpemUpO1xuICAgICAgcmV0dXJuIHsgY29kZTowLCBkYXRhOnsgbGlzdDogcGFnZUxpc3QsIHRvdGFsLCBwYWdlLCBwYWdlU2l6ZSB9IH07XG4gICAgfVxuICB9LFxuICAvLyBcdThCRTZcdTYwQzVcbiAgeyB1cmw6Jy9hcGkvc3VwcGxpZXJfYnJhbmQvOmlkJywgbWV0aG9kOidnZXQnLCByZXNwb25zZTooeyBwYXJhbXMgfSk9PntcbiAgICAgIGNvbnN0IGIgPSBicmFuZHMuZmluZCh4PT4gU3RyaW5nKHguaWQpPT09U3RyaW5nKHBhcmFtcz8uaWQpKTtcbiAgICAgIGlmICghYikgcmV0dXJuIHsgY29kZToxLCBtc2c6J1x1NjcyQVx1NjI3RVx1NTIzMCcgfTtcbiAgICAgIHJldHVybiB7IGNvZGU6MCwgZGF0YTogYiB9O1xuICAgIH1cbiAgfSxcbiAgLy8gXHU4OUUzXHU2NzkwXHU4RDI4XHU2OEMwXHU2MkE1XHU1NDRBXHU1RTc2XHU0RTBFXHU1RTczXHU1M0YwXHU2ODA3XHU1MUM2XHU4RkRCXHU4ODRDXHU2QkQ0XHU1QkY5XHVGRjA4XHU5ODg0XHU1QkExXHVGRjA5XG4gIHsgdXJsOicvYXBpL3N1cHBsaWVyX2JyYW5kL3BhcnNlX3JlcG9ydCcsIG1ldGhvZDoncG9zdCcsIHJlc3BvbnNlOih7IGJvZHkgfSk9PntcbiAgICAgIGNvbnN0IHBsYXRmb3JtX3N0YW5kYXJkX2lkID0gTnVtYmVyKGJvZHk/LnBsYXRmb3JtX3N0YW5kYXJkX2lkfHwwKTtcbiAgICAgIGNvbnN0IHN0ZCA9IHN0YW5kYXJkcy5maW5kKHM9PiBOdW1iZXIocy5pZCk9PT1wbGF0Zm9ybV9zdGFuZGFyZF9pZCk7XG4gICAgICBpZiAoIXN0ZCkgcmV0dXJuIHsgY29kZToxLCBtc2c6J1x1NUU3M1x1NTNGMFx1NjgwN1x1NTFDNlx1NEUwRFx1NUI1OFx1NTcyOCcgfTtcbiAgICAgIGNvbnN0IHBhcnNlZCA9IG1vY2tQYXJzZVJlcG9ydChib2R5Py5xdWFsaXR5X3JlcG9ydF9uYW1lLCBib2R5Py5xdWFsaXR5X3JlcG9ydF9iYXNlNjQsIHN0ZCk7XG4gICAgICBpZiAoIXBhcnNlZC5wYXNzKSByZXR1cm4geyBjb2RlOjEsIG1zZzonXHU4RDI4XHU2OEMwXHU2MkE1XHU1NDRBXHU4QkM2XHU1MjJCXHU1OTMxXHU4RDI1XHU2MjE2XHU0RTBEXHU1NDA4XHU2ODNDJyB9O1xuICAgICAgY29uc3Qgc3BlYyA9IHN0ZC5zcGVjaWZpY2F0aW9uc3x8e307XG4gICAgICBjb25zdCBtZWFzdXJlZCA9IHBhcnNlZC5tZWFzdXJlZHx8e307XG4gICAgICBjb25zdCByb3dzID0gT2JqZWN0LmtleXMobWVhc3VyZWQpLm1hcChrPT57XG4gICAgICAgIGNvbnN0IG0gPSBtZWFzdXJlZFtrXTtcbiAgICAgICAgY29uc3QgcyA9IHNwZWNba107XG4gICAgICAgIGxldCBvayA9IHRydWU7IGxldCBleHBlY3RlZCA9ICcnO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShzKSAmJiB0eXBlb2Ygc1swXT09PSdudW1iZXInICYmIHR5cGVvZiBzWzFdPT09J251bWJlcicpe1xuICAgICAgICAgIG9rID0gKG0+PXNbMF0gJiYgbTw9c1sxXSk7IGV4cGVjdGVkID0gYCR7c1swXX0gfiAke3NbMV19YDtcbiAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHMpKXtcbiAgICAgICAgICBvayA9IHMuaW5jbHVkZXMobSk7IGV4cGVjdGVkID0gcy5qb2luKCcvJyk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHM9PT0nbnVtYmVyJyl7XG4gICAgICAgICAgb2sgPSBtPj1zOyBleHBlY3RlZCA9IGBcdTIyNjUgJHtzfWA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZXhwZWN0ZWQgPSBzPT1udWxsPyAnLScgOiBTdHJpbmcocyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgbWV0cmljOiBrLCBleHBlY3RlZCwgbWVhc3VyZWQ6IG0sIG9rIH07XG4gICAgICB9KTtcbiAgICAgIGNvbnN0IHBhc3MgPSByb3dzLmV2ZXJ5KHI9PiByLm9rKTtcbiAgICAgIHJldHVybiB7IGNvZGU6MCwgZGF0YTogeyByb3dzLCBwYXNzLCBwcm9maWxlOiBwYXJzZWQucHJvZmlsZSB9IH07XG4gICAgfVxuICB9LFxuICB7IHVybDonL2FwaS9zdXBwbGllcl9icmFuZCcsIG1ldGhvZDoncG9zdCcsIHJlc3BvbnNlOih7IGJvZHkgfSk9PntcbiAgICAgIGNvbnN0IGJyYW5kX25hbWUgPSBTdHJpbmcoYm9keT8uYnJhbmRfbmFtZXx8JycpLnRyaW0oKTtcbiAgICAgIGNvbnN0IHBsYXRmb3JtX3N0YW5kYXJkX2lkID0gTnVtYmVyKGJvZHk/LnBsYXRmb3JtX3N0YW5kYXJkX2lkfHwwKTtcbiAgICAgIGNvbnN0IHN1cHBsaWVyX2lkID0gTnVtYmVyKGJvZHk/LnN1cHBsaWVyX2lkfHwwKXx8MTtcbiAgICAgIGNvbnN0IGN1c3RvbV9wcmVtaXVtID0gTnVtYmVyKGJvZHk/LmN1c3RvbV9wcmVtaXVtfHwwKXx8MDtcbiAgICAgIGlmICghYnJhbmRfbmFtZSB8fCAhcGxhdGZvcm1fc3RhbmRhcmRfaWQpIHJldHVybiB7IGNvZGU6MSwgbXNnOidcdTUzQzJcdTY1NzBcdTRFMERcdTVCOENcdTY1NzQnIH07XG4gICAgICBpZiAoYnJhbmRzLnNvbWUoYj0+IGIuc3VwcGxpZXJfaWQ9PT1zdXBwbGllcl9pZCAmJiBiLmJyYW5kX25hbWU9PT1icmFuZF9uYW1lKSkgcmV0dXJuIHsgY29kZToxLCBtc2c6J1x1OEJFNVx1NUJBMlx1NjIzN1x1NTRDMVx1NzI0Q1x1NTQwRFx1NURGMlx1NUI1OFx1NTcyOCcgfTtcbiAgICAgIGNvbnN0IHN0ZCA9IHN0YW5kYXJkcy5maW5kKHM9PiBOdW1iZXIocy5pZCk9PT1wbGF0Zm9ybV9zdGFuZGFyZF9pZCk7XG4gICAgICBpZiAoIXN0ZCkgcmV0dXJuIHsgY29kZToxLCBtc2c6J1x1NUU3M1x1NTNGMFx1NjgwN1x1NTFDNlx1NEUwRFx1NUI1OFx1NTcyOCcgfTtcblxuICAgICAgY29uc3QgcGFyc2VkID0gbW9ja1BhcnNlUmVwb3J0KGJvZHk/LnF1YWxpdHlfcmVwb3J0X25hbWUsIGJvZHk/LnF1YWxpdHlfcmVwb3J0X2Jhc2U2NCwgc3RkKTtcbiAgICAgIGlmICghcGFyc2VkLnBhc3MpIHJldHVybiB7IGNvZGU6MSwgbXNnOidcdThEMjhcdTY4QzBcdTYyQTVcdTU0NEFcdThCQzZcdTUyMkJcdTU5MzFcdThEMjVcdTYyMTZcdTRFMERcdTU0MDhcdTY4M0MnIH07XG4gICAgICBjb25zdCBvayA9IHZhbGlkYXRlQWdhaW5zdFNwZWMoc3RkLCBwYXJzZWQubWVhc3VyZWQpO1xuICAgICAgaWYgKCFvaykgcmV0dXJuIHsgY29kZToxLCBtc2c6J1x1OEQyOFx1NjhDMFx1NjJBNVx1NTQ0QVx1NjU3MFx1NjM2RVx1NEUwRVx1NjI0MFx1OTAwOVx1N0I0OVx1N0VBN1x1NEUwRFx1N0IyNicgfTtcblxuICAgICAgY29uc3QgcGxhdGZvcm1fYnJhbmRfY29kZSA9IGdlblBsYXRmb3JtQnJhbmRDb2RlKHN0ZCk7XG4gICAgICBjb25zdCBpdGVtID0geyBpZDogbmV4dElkKCksIHN1cHBsaWVyX2lkLCBicmFuZF9uYW1lLCBwbGF0Zm9ybV9zdGFuZGFyZF9pZCwgY3VzdG9tX3ByZW1pdW0sIHBsYXRmb3JtX2JyYW5kX2NvZGUsIHN0YXR1czonXHU1REYyXHU0RTBBXHU2N0I2JywgcXVhbGl0eV9yZXBvcnRfdXJsOicnLCBfZGF0ZTogZGF0ZVN0cigpIH07XG4gICAgICBicmFuZHMucHVzaChpdGVtKTsgc2F2ZShicmFuZHMpO1xuICAgICAgLy8gXHU1NDBDXHU2QjY1XHU1MTk5XHU1NkRFXHU1MjMwXHU0RUE3XHU1NEMxXHU4ODY4XG4gICAgICB0cnl7XG4gICAgICAgIGNvbnN0IHBmaWxlID0gcGF0aC5yZXNvbHZlKGRhdGFEaXIsICdwcm9kdWN0cy5qc29uJyk7XG4gICAgICAgIGNvbnN0IHBsaXN0ID0gZnMuZXhpc3RzU3luYyhwZmlsZSk/IEpTT04ucGFyc2UoZnMucmVhZEZpbGVTeW5jKHBmaWxlLCd1dGY4JykpOiBbXTtcbiAgICAgICAgY29uc3Qgbm93SWQgPSBNYXRoLm1heCgwLCAuLi5wbGlzdC5tYXAoKHApPT5wLmlkfHwwKSkgKyAxO1xuICAgICAgICBjb25zdCBwcm9kdWN0X2lkID0gZ2VuUHJvZHVjdElkQnlTdGQoc3RkKTtcbiAgICAgICAgY29uc3QgYmFzZVByb2R1Y3QgPSB7XG4gICAgICAgICAgaWQ6IG5vd0lkLFxuICAgICAgICAgIHByb2R1Y3RfaWQsXG4gICAgICAgICAgc3BlY2llczogc3RkLmNvbW1vZGl0eV90eXBlfHwnXHU2OEM5XHU4MkIxJyxcbiAgICAgICAgICBwcm9kdWN0X25hbWU6IGJyYW5kX25hbWUsXG4gICAgICAgICAgc2hvcnRfY29kZTogJycsXG4gICAgICAgICAgcHJvZHVjdGlvbl95ZWFyOiBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCksXG4gICAgICAgICAgcGFja2FnZV9zcGVjOiAnMjAwa2cvXHU1MzA1JyxcbiAgICAgICAgICBvcmlnaW5fYXJlYTogJ1x1NjVCMFx1NzU4NicsXG4gICAgICAgICAgc3RhdHVzOiAnXHU0RTBBXHU2N0I2JyxcbiAgICAgICAgICBwbGF0Zm9ybV9zdGFuZGFyZF9pZCxcbiAgICAgICAgICBwbGF0Zm9ybV9zdGFuZGFyZF9ncmFkZV9uYW1lOiBzdGQuZ3JhZGVfbmFtZSxcbiAgICAgICAgICBwbGF0Zm9ybV9icmFuZF9jb2RlLFxuICAgICAgICAgIHBsYXRmb3JtX2Jhc2VfcHJlbWl1bTogc3RkLmJhc2VfcHJlbWl1bVxuICAgICAgICB9O1xuICAgICAgICBwbGlzdC5wdXNoKGJhc2VQcm9kdWN0KTtcbiAgICAgICAgZnMud3JpdGVGaWxlU3luYyhwZmlsZSwgSlNPTi5zdHJpbmdpZnkocGxpc3QsbnVsbCwyKSwndXRmOCcpO1xuICAgICAgICByZXR1cm4geyBjb2RlOjAsIGRhdGE6IHsgYnJhbmRfbmFtZSwgcGxhdGZvcm1fYnJhbmRfY29kZSwgc3RhdHVzOiBpdGVtLnN0YXR1cywgcHJvZHVjdF9kYl9pZDogbm93SWQsIHByb2R1Y3RfaWQgfSB9O1xuICAgICAgfWNhdGNoe1xuICAgICAgICByZXR1cm4geyBjb2RlOjAsIGRhdGE6IHsgYnJhbmRfbmFtZSwgcGxhdGZvcm1fYnJhbmRfY29kZSwgc3RhdHVzOiBpdGVtLnN0YXR1cyB9IH07XG4gICAgICB9XG4gICAgfVxuICB9LFxuICAvLyBcdTY2RjRcdTY1QjBcbiAgeyB1cmw6Jy9hcGkvc3VwcGxpZXJfYnJhbmQvOmlkJywgbWV0aG9kOidwdXQnLCByZXNwb25zZTooeyBwYXJhbXMsIGJvZHkgfSk9PntcbiAgICAgIGNvbnN0IGlkeCA9IGJyYW5kcy5maW5kSW5kZXgoYj0+IFN0cmluZyhiLmlkKT09PVN0cmluZyhwYXJhbXM/LmlkKSk7XG4gICAgICBpZiAoaWR4PT09LTEpIHJldHVybiB7IGNvZGU6MSwgbXNnOidcdTY3MkFcdTYyN0VcdTUyMzAnIH07XG4gICAgICBjb25zdCB1cGRhdGVzID0ge307XG4gICAgICBpZiAoYm9keT8uYnJhbmRfbmFtZSE9bnVsbCkgdXBkYXRlcy5icmFuZF9uYW1lID0gU3RyaW5nKGJvZHkuYnJhbmRfbmFtZSkudHJpbSgpO1xuICAgICAgaWYgKGJvZHk/LmN1c3RvbV9wcmVtaXVtIT1udWxsKSB1cGRhdGVzLmN1c3RvbV9wcmVtaXVtID0gTnVtYmVyKGJvZHkuY3VzdG9tX3ByZW1pdW0pfHwwO1xuICAgICAgYnJhbmRzW2lkeF0gPSB7IC4uLmJyYW5kc1tpZHhdLCAuLi51cGRhdGVzIH07XG4gICAgICBzYXZlKGJyYW5kcyk7XG4gICAgICByZXR1cm4geyBjb2RlOjAsIGRhdGE6IGJyYW5kc1tpZHhdIH07XG4gICAgfVxuICB9LFxuICAvLyBcdTUyMjBcdTk2NjRcbiAgeyB1cmw6Jy9hcGkvc3VwcGxpZXJfYnJhbmQvOmlkJywgbWV0aG9kOidkZWxldGUnLCByZXNwb25zZTooeyBwYXJhbXMgfSk9PntcbiAgICAgIGNvbnN0IGJlZm9yZSA9IGJyYW5kcy5sZW5ndGg7XG4gICAgICBicmFuZHMgPSBicmFuZHMuZmlsdGVyKGI9PiBTdHJpbmcoYi5pZCkhPT1TdHJpbmcocGFyYW1zPy5pZCkpO1xuICAgICAgc2F2ZShicmFuZHMpO1xuICAgICAgcmV0dXJuIHsgY29kZTowLCBkYXRhOnsgcmVtb3ZlZDogYmVmb3JlIC0gYnJhbmRzLmxlbmd0aCB9IH07XG4gICAgfVxuICB9XG5dO1xuXG5cbiJdLAogICJtYXBwaW5ncyI6ICI7QUFBd04sT0FBTyxRQUFRO0FBQ3ZPLE9BQU8sVUFBVTtBQUVqQixJQUFNLFVBQVUsS0FBSyxRQUFRLFFBQVEsSUFBSSxHQUFHLFFBQVEsTUFBTTtBQUMxRCxJQUFNLE9BQU8sS0FBSyxRQUFRLFNBQVMscUJBQXFCO0FBQ3hELElBQU0sVUFBVSxLQUFLLFFBQVEsU0FBUyx3QkFBd0I7QUFDOUQsU0FBUyxTQUFRO0FBQUUsTUFBRztBQUFFLFFBQUcsQ0FBQyxHQUFHLFdBQVcsT0FBTyxFQUFHLElBQUcsVUFBVSxTQUFRLEVBQUMsV0FBVSxLQUFJLENBQUM7QUFBQSxFQUFHLFFBQU07QUFBQSxFQUFDO0FBQUU7QUFD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
